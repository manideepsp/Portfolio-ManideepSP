---
import BaseLayout from '../layouts/BaseLayout.astro';
import ScrollRevealWrapper from '../components/ScrollRevealWrapper.astro';
import ExperienceTimeline from '../components/ExperienceTimeline.astro';
import config from '../lib/config.json';
import { renderMarkdown } from '../lib/markdown.js';
import fs from 'fs';

let aboutHtml = '';

try {
  // Read markdown file path from config
  const mdPath = config.about?.markdownFile || '/content/about.md';
  const md = fs.readFileSync(new URL(`../..${mdPath}`, import.meta.url), 'utf8');
  aboutHtml = await renderMarkdown(md);
} catch (e) {
  aboutHtml = '<p>No about content yet.</p>';
}
---
<BaseLayout title="About">
  <section>
    <ScrollRevealWrapper>
      <h1>About</h1>
    </ScrollRevealWrapper>
    <ScrollRevealWrapper delay={100}>
      <div class="markdown-render" set:html={aboutHtml}></div>
    </ScrollRevealWrapper>
  </section>

  <section>
    <h2>Experience</h2>
    <ExperienceTimeline />
  </section>
</BaseLayout>
 