---
import BaseLayout from '../layouts/BaseLayout.astro';
import config from '../lib/config.json';
import ProjectCard from '../components/ProjectCard.astro';
import ScrollRevealWrapper from '../components/ScrollRevealWrapper.astro';
import { slugify } from '../lib/slugify.js';

// Use projects from config
const projects = (config.projects || []).map((p) => ({ ...p, slug: p.slug || slugify(p.title) }));
---
<BaseLayout title="Projects">
  <section>
    <h1>Work</h1>
    <p style="color: var(--muted); margin-bottom: 40px;">A selection of projects I've built and shipped:</p>
    <div class="grid">
      {projects.map((p, i) => (
        <ScrollRevealWrapper delay={i * 100}>
          <ProjectCard 
            title={p.title} 
            description={p.description} 
            image={p.image} 
            repoUrl={p.repoUrl}
            slug={p.slug}
          />
        </ScrollRevealWrapper>
      ))}
    </div>
  </section>
</BaseLayout>
 